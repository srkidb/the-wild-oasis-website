(()=>{var e={};e.id=626,e.ids=[626],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},72254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},15673:e=>{"use strict";e.exports=require("node:events")},88849:e=>{"use strict";e.exports=require("node:http")},22286:e=>{"use strict";e.exports=require("node:https")},47261:e=>{"use strict";e.exports=require("node:util")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},91905:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>o.a,__next_app__:()=>b,originalPathname:()=>l,pages:()=>u,routeModule:()=>p,tree:()=>c});var r=i(50482),s=i(69108),a=i(62563),o=i.n(a),n=i(68300),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);i.d(t,d);let c=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,29925)),"/Volumes/Untitled/desktop/web dev udemy/Jonas Schmedtmann/ultimate-react-course-main/21-the-wild-oasis-website/the-wild-oasis-website/app/login/page.js"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,57575)),"/Volumes/Untitled/desktop/web dev udemy/Jonas Schmedtmann/ultimate-react-course-main/21-the-wild-oasis-website/the-wild-oasis-website/app/layout.js"],error:[()=>Promise.resolve().then(i.bind(i,60826)),"/Volumes/Untitled/desktop/web dev udemy/Jonas Schmedtmann/ultimate-react-course-main/21-the-wild-oasis-website/the-wild-oasis-website/app/error.js"],loading:[()=>Promise.resolve().then(i.bind(i,65016)),"/Volumes/Untitled/desktop/web dev udemy/Jonas Schmedtmann/ultimate-react-course-main/21-the-wild-oasis-website/the-wild-oasis-website/app/loading.js"],"not-found":[()=>Promise.resolve().then(i.bind(i,46178)),"/Volumes/Untitled/desktop/web dev udemy/Jonas Schmedtmann/ultimate-react-course-main/21-the-wild-oasis-website/the-wild-oasis-website/app/not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],u=["/Volumes/Untitled/desktop/web dev udemy/Jonas Schmedtmann/ultimate-react-course-main/21-the-wild-oasis-website/the-wild-oasis-website/app/login/page.js"],l="/login/page",b={require:i,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},61435:(e,t,i)=>{let r={"0e91ee77b993be1e3682f31d37ba0ccd1017afb7":()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.createBooking),"1eda4f4b37716337e07b6d7fb68729d7273a0db7":()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.signOutAction),"381a2ba26357e4459204946457360d6bd76c7b09":()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.deleteBooking),"4c47d189dfdee72f5e712c4a274581ac5d12a2b2":()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.updateGuest),"7a094a0e84af70467919753c3411c2a8c3115119":()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.updateBooking),da1cfaf08f02c15753e897a6cebaf68b15db40f8:()=>Promise.resolve().then(i.bind(i,10752)).then(e=>e.signInAction)};async function s(e,...t){return(await r[e]()).apply(null,t)}e.exports={"0e91ee77b993be1e3682f31d37ba0ccd1017afb7":s.bind(null,"0e91ee77b993be1e3682f31d37ba0ccd1017afb7"),"1eda4f4b37716337e07b6d7fb68729d7273a0db7":s.bind(null,"1eda4f4b37716337e07b6d7fb68729d7273a0db7"),"381a2ba26357e4459204946457360d6bd76c7b09":s.bind(null,"381a2ba26357e4459204946457360d6bd76c7b09"),"4c47d189dfdee72f5e712c4a274581ac5d12a2b2":s.bind(null,"4c47d189dfdee72f5e712c4a274581ac5d12a2b2"),"7a094a0e84af70467919753c3411c2a8c3115119":s.bind(null,"7a094a0e84af70467919753c3411c2a8c3115119"),da1cfaf08f02c15753e897a6cebaf68b15db40f8:s.bind(null,"da1cfaf08f02c15753e897a6cebaf68b15db40f8")}},10752:(e,t,i)=>{"use strict";i.r(t),i.d(t,{createBooking:()=>u,deleteBooking:()=>l,signInAction:()=>p,signOutAction:()=>m,updateBooking:()=>b,updateGuest:()=>c});var r=i(31542);i(68616);var s=i(42735),a=i(66563),o=i(61024),n=i(66864),d=i(867);async function c(e){let t=await (0,s.I8)();if(!t)throw Error("You must be logged in");let i=e.get("nationalID"),[r,a]=e.get("nationality").split("%");if(!/^[a-zA-Z0-9]{6,12}$/.test(i))throw Error("Please provide a valid national ID");let{data:d,error:c}=await o.O.from("guests").update({nationality:r,countryFlag:a,nationalID:i}).eq("id",t.user.guestId);if(c)throw Error("Guest could not be updated");(0,n.revalidatePath)("/account/profile")}async function u(e,t){let i=await (0,s.I8)();if(!i)throw Error("You must be logged in");let r={...e,guestId:i.user.guestId,numGuests:Number(t.get("numGuests")),observations:t.get("observations").slice(0,1e3),extrasPrice:0,totalPrice:e.cabinPrice,isPaid:!1,hasBreakfast:!1,status:"unconfirmed"},{error:a}=await o.O.from("bookings").insert([r]);if(a)throw Error("Booking could not be created");(0,n.revalidatePath)(`/cabins/${e.cabinId}`),(0,d.redirect)("/cabins/thankyou")}async function l(e){let t=await (0,s.I8)();if(!t)throw Error("You must be logged in");if(!(await (0,a.aL)(t.user.guestId)).map(e=>e.id).includes(e))throw Error("You are not allowed to delete this booking");let{error:i}=await o.O.from("bookings").delete().eq("id",e);if(i)throw Error("Booking could not be deleted");(0,n.revalidatePath)("/account/reservations")}async function b(e){let t=Number(e.get("bookingId")),i=await (0,s.I8)();if(!i)throw Error("You must be logged in");if(!(await (0,a.aL)(i.user.guestId)).map(e=>e.id).includes(t))throw Error("You are not allowed to update this booking");let r={numGuests:Number(e.get("numGuests")),observations:e.get("observations").slice(0,1e3)},{error:c}=await o.O.from("bookings").update(r).eq("id",t).select().single();if(c)throw Error("Booking could not be updated");(0,n.revalidatePath)(`/account/reservations/edit/${t}`),(0,n.revalidatePath)("/account/reservations"),(0,d.redirect)("/account/reservations")}async function p(){await (0,s.zB)("google",{redirectTo:"/account"})}async function m(){await (0,s.w7)({redirectTo:"/"})}(0,i(42053).h)([c,u,l,b,p,m]),(0,r.j)("4c47d189dfdee72f5e712c4a274581ac5d12a2b2",c),(0,r.j)("0e91ee77b993be1e3682f31d37ba0ccd1017afb7",u),(0,r.j)("381a2ba26357e4459204946457360d6bd76c7b09",l),(0,r.j)("7a094a0e84af70467919753c3411c2a8c3115119",b),(0,r.j)("da1cfaf08f02c15753e897a6cebaf68b15db40f8",p),(0,r.j)("1eda4f4b37716337e07b6d7fb68729d7273a0db7",m)},29925:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n,metadata:()=>o});var r=i(25036),s=i(10752);let a=function(){return r.jsx("form",{action:s.signInAction,children:(0,r.jsxs)("button",{className:"flex items-center gap-6 text-lg border border-primary-300 px-10 py-4 font-medium",children:[r.jsx("img",{src:"https://authjs.dev/img/providers/google.svg",alt:"Google logo",height:"24",width:"24"}),r.jsx("span",{children:"Continue with Google"})]})})},o={title:"Login"};function n(){return(0,r.jsxs)("div",{className:"flex flex-col gap-10 mt-10 items-center",children:[r.jsx("h2",{className:"text-3xl font-semibold",children:"Sign in to access your guest area"}),r.jsx(a,{})]})}}};var t=require("../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[638,548,85,225,864,222,112],()=>i(91905));module.exports=r})();